{% extends "base.html" %} {% load static %} {% block title %} My Account {% endblock title %} {% block content %}
<div class="content-wrapper">
  <div class="content">
    <!-- Card Profile -->
    <div class="card card-default card-profile">
      <div class="card-header-bg"></div>

      <div class="card-body card-profile-body">
        <div class="profile-avata">
          <img
            {% if user.image %}
            src="{{ user.image.url }}"
            {% else %}
            src="{% static 'images/user/user-md-01.jpg' %}"
            {% endif %}
            class="rounded-circle"
            alt="Avatar Image"
          />
          <a class="h5 d-block mt-3 mb-2" href="#">{{ user.username }}</a>
          <a class="d-block text-color" href="#">{{ user.email }}</a>
        </div>
      </div>

      <div class="card-footer card-profile-footer">
        <ul class="nav nav-border-top justify-content-center">
          <li class="nav-item">
            <a class="nav-link" href="/profile">Profile</a>
          </li>
          <li class="nav-item">
            <a class="nav-link active" href="/account">Account Setting</a>
          </li>
          <li class="nav-item">
            <a class="nav-link " href="/change-password">Change Password</a>
          </li>
        </ul>
      </div>
    </div>

    <div class="row">
      <div class="col-xl-3">
        <!-- Settings -->
        <div class="card card-default">
          <div class="card-header">
            <h2>Details</h2>
          </div>

          <div class="card-body pt-0">
            <ul class="nav nav-settings">
              <li class="nav-item">
                <a class="nav-link" href="/profile">
                  <i class="mdi mdi-account-outline mr-1"></i> Profile
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link active" href="/account">
                  <i class="mdi mdi-settings-outline mr-1"></i> Account
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/change-password">
                  <i class="mdi mdi-settings-outline mr-1"></i> Change Password
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
      {% comment %} Content {% endcomment %}
      <div class="col-xl-9">
        <!-- Account Settings -->
        <div class="card card-default">
          <div class="card-header">
            <h2 class="mb-5">Account Settings</h2>
          </div>

          <!-- Display messages -->

          <div class="card-body">
            <form method="post" enctype="multipart/form-data">
              {% csrf_token %}
              <div class="row mb-2">
                <div class="col-lg-6">
                  <div class="form-group">
                    <label for="firstName">First name</label>
                    {{ form.first_name }}
                  </div>
                </div>

                <div class="col-lg-6">
                  <div class="form-group">
                    <label for="lastName">Last name</label>
                    {{ form.last_name }}
                  </div>
                </div>
              </div>

              <div class="row mb-2">
                <div class="col-lg-6">
                  <div class="form-group mb-4">
                    <label for="userName">User name</label>
                    {{ form.username }}
                    <span class="error-message">{{ form.username.errors }}</span>
                    <span class="d-block mt-1"
                      >Username to login with.</span
                    >
                  </div>
                </div>

                <div class="col-lg-6">
                  <div class="form-group">
                    <label for="birth_date">Date of Birth</label>
                    <div
                      class="d-flex justify-content-between align-items-end"
                      id="birth_date"
                    >
                      {{ form.birth_date }}
                      <span class="error-message">{{ form.birth_date.errors }}</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row mb-2">
                <div class="col-lg-6">
                  <div class="form-group">
                    <label for="email">Email</label>
                    {{ form.email }}
                  </div>
                </div>

                <div class="col-lg-6">
                  <div class="form-group">
                    <label for="birth_date">Phone Number</label>
                    {{ form.phone }}
                  </div>
                </div>
              </div>

              <div class="form-group mb-4">
                <label for="email">User image</label>
                {{ form.image }}
              </div>

              <!--
              <div class="form-group mb-4">
                <label for="newPassword">New password</label>
                <input type="password" class="form-control" id="newPassword" />
              </div>

              <div class="form-group mb-4">
                <label for="conPassword">Confirm password</label>
                <input type="password" class="form-control" id="conPassword" />
              </div>
            -->

              <div class="d-flex justify-content-end mt-6">
                <button type="submit" class="btn btn-primary mb-2 btn-pill">
                  Update Profile
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  // edit birth_date form
  const birth_date_container = document.getElementById("birth_date");
  const day_field = document.getElementById("id_birth_date_day");
  const month_field = document.getElementById("id_birth_date_month");
  const year_field = document.getElementById("id_birth_date_year");

  day_field.className = "form-control ";
  month_field.className = "form-control mx-1";
  year_field.className = "form-control ";

  birth_date_container.innerHTML = `
    ${day_field.outerHTML}
    ${month_field.outerHTML}
    ${year_field.outerHTML}
    `;

</script>
{% endblock content %}
